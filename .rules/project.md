# –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã: MetaExpert

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é, –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—É—é –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É **layer-based architecture** (—Å–ª–æ–µ–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞). –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ `core`, `exchanges`, `utils` –∏ –¥—Ä—É–≥–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ API –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

```
.
‚îú‚îÄ‚îÄ docs/                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (MkDocs)
‚îú‚îÄ‚îÄ examples/            # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è "—ç–∫—Å–ø–µ—Ä—Ç–æ–≤" –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±–∏—Ä–∂
‚îú‚îÄ‚îÄ src/                 # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ metaexpert/
‚îÇ       ‚îú‚îÄ‚îÄ backtest/    # –ú–æ–¥—É–ª—å –¥–ª—è –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
‚îÇ       ‚îú‚îÄ‚îÄ cli/         # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (CLI)
‚îÇ       ‚îú‚îÄ‚îÄ core/        # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã: –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏, —Å–æ–±—ã—Ç–∏—è, –∫–ª–∞—Å—Å—ã
‚îÇ       ‚îú‚îÄ‚îÄ exchanges/   # –ú–æ–¥—É–ª–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –±–∏—Ä–∂–∞–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ logger/      # –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ template/    # –®–∞–±–ª–æ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ utils/       # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ websocket/   # –û–±—Ä–∞–±–æ—Ç–∫–∞ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
‚îî‚îÄ‚îÄ tests/               # –¢–µ—Å—Ç—ã (–ø—É—Å—Ç–æ, –Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ª–æ–∂–µ–Ω–∞)
```

- **`src/metaexpert`**: –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –≤—Å—é –ª–æ–≥–∏–∫—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.
- **`core`**: –°–µ—Ä–¥—Ü–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ó–¥–µ—Å—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ `Expert`, `Market`, `Trade`, –∏ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è (`Timeframe`, `MarketType` –∏ —Ç.–¥.), —Ñ–æ—Ä–º–∏—Ä—É—é—â–∏–µ –ø—Ä–µ–¥–º–µ—Ç–Ω—É—é –æ–±–ª–∞—Å—Ç—å.
- **`exchanges`**: –ú–æ–¥—É–ª–∏, –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É—é—â–∏–µ –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å API –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫—Ä–∏–ø—Ç–æ–±–∏—Ä–∂ (Binance, Bybit, OKX). –≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ **–ê–¥–∞–ø—Ç–µ—Ä** –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
- **`examples`**: –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–µ, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É `metaexpert` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö –±–æ—Ç–æ–≤. –ö–∞–∂–¥—ã–π –ø—Ä–∏–º–µ—Ä —è–≤–ª—è–µ—Ç—Å—è —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º —Å–æ —Å–≤–æ–∏–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.
- **`docs`**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å –ø–æ–º–æ—â—å—é `MkDocs`, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Ö–æ—Ä–æ—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞.
- **`tests`**: –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤. –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø—É—Å—Ç–∞, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º**, —É—á–∏—Ç—ã–≤–∞—è –∑–∞—è–≤–ª–µ–Ω–Ω—ã–π –≤ `AGENT.md` –ø—Ä–∏–Ω—Ü–∏–ø TDD.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞.

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è          | –í–µ—Ä—Å–∏—è/–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç           | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                       |
|--------------------|-----------------------------|--------------------------------------------------|
| **–Ø–∑—ã–∫**           | Python                      | `>=3.12`                                         |
| **CLI**            | Typer                       | `~=0.19.2` - –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ |
| **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** | Pydantic                    | `~=2.12.2` - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**      | Structlog                   | `~=25.4.0` - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏ –≥–∏–±–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **WebSocket**      | websockets                  | `~=15.0.1` - –†–∞–±–æ—Ç–∞ —Å WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏     |
| **–õ–∏–Ω—Ç–µ—Ä/–§–æ—Ä–º–∞—Ç–µ—Ä**| Ruff                        | `~=0.14.0` - –ë—ã—Å—Ç—Ä—ã–π –ª–∏–Ω—Ç–µ—Ä –∏ —Ñ–æ—Ä–º–∞—Ç–µ—Ä –∫–æ–¥–∞ Python |
| **–¢–∏–ø–∏–∑–∞—Ü–∏—è**        | Pyright                     | `~=1.1.406` - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–∏–ø–æ–≤         |
| **–°–±–æ—Ä–∫–∞/–ü–∞–∫–µ—Ç—ã**  | uv / pip                    | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞        |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**     | MkDocs (Material)           | `~=9.6.22` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑ Markdown  |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**     | Pytest, pytest-asyncio      | `~=8.3.4` - –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤       |

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `pyproject.toml` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º Python.

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ **—Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ (Event-Driven Architecture)** –∏ **–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞—Ö**, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–µ –≥–∏–±–∫–æ–π –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –ª–æ–≥–∏–∫–æ–π
–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è –∫–ª–∞—Å—Å `MetaExpert`, –∫–æ—Ç–æ—Ä—ã–π –≤—ã—Å—Ç—É–ø–∞–µ—Ç –≤ —Ä–æ–ª–∏ **–§–∞—Å–∞–¥–∞** –∏ **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞**. –û–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –±–∏—Ä–∂–µ–π –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞.

–õ–æ–≥–∏–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —á–µ—Ä–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤. –≠—Ç–æ –æ—Ç–ª–∏—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä **–∏–Ω–≤–µ—Ä—Å–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Inversion of Control)**.

```python
# src/metaexpert/template/template.py:121
@expert.on_bar(
    timeframe="1h",
)
def bar(rates) -> None:
    """Called when a new bar closes. Implement core strategy logic here."""
    pass

@expert.on_tick
def tick(rates) -> None:
    """Called on every price tick."""
    pass
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ —Å–∞–º–æ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –¥–≤–∞ —É—Ä–æ–≤–Ω—è:
1.  **`MetaExpert( ... )`**: –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –±–∏—Ä–∂–∏, —Ç–∏–ø–∞ —Ä—ã–Ω–∫–∞.
2.  **`@expert.on_init( ... )`**: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (—Å–∏–º–≤–æ–ª, —Ç–∞–π–º—Ñ—Ä–µ–π–º, —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç).

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π (—Ö–æ—Ç—è —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, –ø–æ—Ö–æ–∂–µ, —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä `MetaExpert`).

### –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ `src/metaexpert/config.py`. –≠—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑—É–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–≥–∏–±–∫–∏–º. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Pydantic` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ `.env` —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –±—ã–ª–æ –±—ã –±–æ–ª–µ–µ –º–æ—â–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º.
- **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö**: –î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ `Expert`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `dataclasses`, —á—Ç–æ —É–ª—É—á—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–¥–∞.

```python
# src/metaexpert/core/expert.py:7
@dataclass
class Expert:
    # --- Core Trading Parameters ---
    symbol: str
    timeframe: Timeframe
    # ...
```

## ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

- **–õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Ruff` —Å –±–æ–ª—å—à–∏–º –Ω–∞–±–æ—Ä–æ–º –ø—Ä–∞–≤–∏–ª (`E`, `W`, `F`, `I`, `C`, `B`) –∏ `Pyright` –¥–ª—è —Å—Ç—Ä–æ–≥–æ–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –≥–æ–≤–æ—Ä–∏—Ç –æ –≤—ã—Å–æ–∫–æ–º –≤–Ω–∏–º–∞–Ω–∏–∏ –∫ –∫–∞—á–µ—Å—Ç–≤—É –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞.
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω (`py.typed` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç), —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –æ–≥—Ä–æ–º–Ω—ã–º –ø–ª—é—Å–æ–º –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ –∫–æ–¥–µ**: –ö–æ–¥ —Ö–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é –¥–æ–∫—Å—Ç—Ä–∏–Ω–≥–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –æ–±—ä—è—Å–Ω—è—é—â–∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π, –∫–ª–∞—Å—Å–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π.
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: **–ì–ª–∞–≤–Ω–∞—è —Å–ª–∞–±–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞.** –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ `pytest` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `tests/`, —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. –≠—Ç–æ –ø—Ä—è–º–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ **TDD**, –∑–∞—è–≤–ª–µ–Ω–Ω–æ–≥–æ –≤ `AGENT.md`, –∏ –Ω–µ—Å–µ—Ç —Å–µ—Ä—å–µ–∑–Ω—ã–µ —Ä–∏—Å–∫–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞.

## üîß –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. `MetaExpert` (–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –≤—Å–µ–º –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∏—Ä–∂–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏, –∑–∞–ø—É—Å–∫ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤–æ–π –ª–æ–≥–∏–∫–∏.
- **API**: `__init__`, `run`, –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã —Å–æ–±—ã—Ç–∏–π (`on_init`, `on_bar`, `on_tick`, etc.).
- **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
    ```python
    # src/metaexpert/template/template.py:16
    expert = MetaExpert(
        exchange="binance",
        market_type="futures",
        log_level="INFO",
    )
    # ...
    expert.run(trade_mode="paper")
    ```

### 2. `@expert.on_init` (–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–æ—Ä–≥–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –ø–µ—Ä–µ–¥–∞–≤–∞—è –∏—Ö –≤ `dataclass` `Expert`.
- **API**: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤ `src/metaexpert/core/expert.py`.
- **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
    ```python
    # src/metaexpert/template/template.py:52
    @expert.on_init(
        symbol="BTCUSDT",
        timeframe="1h",
        leverage=10,
        stop_loss_pct=2.0,
    )
    def init() -> None:
        """Initialize indicators or load data here."""
        pass
    ```

### 3. `@expert.on_bar` / `@expert.on_tick` (–î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã —Å–æ–±—ã—Ç–∏–π)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∑–∞–∫—Ä—ã—Ç–∏–µ —Å–≤–µ—á–∏ –∏–ª–∏ –Ω–æ–≤—ã–π —Ç–∏–∫). –≠—Ç–æ –æ—Å–Ω–æ–≤–∞ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–æ—Ä–≥–æ–≤–æ–π –ª–æ–≥–∏–∫–∏.
- **API**: –ü—Ä–∏–Ω–∏–º–∞—é—Ç —Ñ—É–Ω–∫—Ü–∏—é-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫. `@expert.on_bar` –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å `timeframe`.
- **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
    ```python
    # src/metaexpert/template/template.py:121
    @expert.on_bar(timeframe="1h")
    def bar(rates) -> None:
        # =>> –í–°–¢–ê–í–¨–¢–ï –í–ê–®–£ –õ–û–ì–ò–ö–£ –ó–î–ï–°–¨ <<=
        # if condition:
        #     expert.trade.buy(...)
        pass
    ```

## üìã –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏**: Middle-friendly. –ü—Ä–æ–µ–∫—Ç —Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è –û–û–ü, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–æ —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω, —á—Ç–æ –æ–±–ª–µ–≥—á–∞–µ—Ç –≤—Ö–æ–¥.

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
- **–ß–µ—Ç–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ú–æ–¥—É–ª—å–Ω–∞—è –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è—Ö –∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞—Ö.
- **–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**: –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è, –ª–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.
- **–•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ö–∞–∫ –≤ –∫–æ–¥–µ, —Ç–∞–∫ –∏ –≤ –≤–∏–¥–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞ –Ω–∞ MkDocs.
- **–ü—Ä–æ–¥—É–º–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω (`template.py`)**: –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π.

### –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è
1.  **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤ (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ù–ï–î–û–°–¢–ê–¢–û–ö)**: –≠—Ç–æ —Å–∞–º–∞—è –±–æ–ª—å—à–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∞. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –Ω–∞—á–∞—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏ (unit, integration), –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è `core` –∏ `exchanges`. –ë–µ–∑ —Ç–µ—Å—Ç–æ–≤ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ —Ç–∞–∫–æ–π —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏, –∫–∞–∫ —Ç—Ä–µ–π–¥–∏–Ω–≥.
2.  **–ñ–µ—Å—Ç–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ `config.py` —Å–ª–µ–¥—É–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –±–æ–ª–µ–µ –≥–∏–±–∫—É—é —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `Pydantic` –∏ –∑–∞–≥—Ä—É–∑–∫–æ–π –∏–∑ `.env` —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.
3.  **–ü—É—Å—Ç–æ–π `__main__.py`**: –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø–∞–∫–µ—Ç–µ –Ω–µ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –≤—ã–∑–æ–≤ –≤ CLI, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–µ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ–π. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤ `typer`-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
4.  **–£–ø—Ä–æ—â–µ–Ω–∏–µ `template.py`**: –§–∞–π–ª —à–∞–±–ª–æ–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. –õ—É—á—à–µ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–∞–º—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–í —Ü–µ–ª–æ–º, **MetaExpert** ‚Äî —ç—Ç–æ –æ—á–µ–Ω—å –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Å –ø—Ä–æ—á–Ω—ã–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–º –∏ –≤—ã—Å–æ–∫–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º –∫–æ–¥–∞. –û–¥–Ω–∞–∫–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤ —è–≤–ª—è–µ—Ç—Å—è —Å–µ—Ä—å–µ–∑–Ω—ã–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ–º –¥–ª—è –µ–≥–æ –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.
